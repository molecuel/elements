<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>@molecuel/elements</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">@molecuel/elements</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1> @molecuel/elements</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<h1 id="-molecuel-elements">@molecuel/elements</h1>
				<p><a href="https://npmjs.org/package/@molecuel/elements"><img src="https://badge.fury.io/js/%40molecuel%2Felements.svg" alt="NPM version"></a> <a href="https://travis-ci.org/molecuel/elements"><img src="https://travis-ci.org/molecuel/elements.svg?branch=master" alt="Build Status"></a> <a href="https://coveralls.io/r/molecuel/elements"><img src="https://coveralls.io/repos/molecuel/elements/badge.svg" alt="Coverage percentage"></a></p>
				<p>elements module for the Molecuel framework. Creating and configuring data models and validation for the database persistence layer. New database connections (documentdb + elasticsearch) are in progress. They will be implemented as adapters and it will be possible to save to different databases with one save method and define the population level of the data in a special population level to denormalize the data for aggregation and optimized reading.
				Elements is able to export all registered Typescript classes as graphql schema which can be used with any graphql server.</p>
				<h2 id="initialization">Initialization</h2>
				<p>To start it, simply import and instantiate it. If you want to make use of molecuel&#39;s offered databases (e.g. @molecuel/mongodb), include them in @molecuel/di&#39;s bootstrap. Necessary configurations are read on instantiation via @molecuel/core&#39;s config functionality or manually via @molecuel/database&#39;s methods. Finally initialize the instance.
				Examples:</p>
				<h3 id="instantiation">Instantiation</h3>
				<pre><code class="lang-typescript"><span class="hljs-keyword">import</span> { MlclElements } <span class="hljs-keyword">from</span>  <span class="hljs-string">"@molecuel/elements"</span>;

<span class="hljs-keyword">const</span> elements = <span class="hljs-keyword">new</span> MlclElements();
</code></pre>
				<p>OR</p>
				<pre><code class="lang-typescript"><span class="hljs-keyword">import</span> { di } <span class="hljs-keyword">from</span> <span class="hljs-string">"@molecuel/di"</span>;
<span class="hljs-keyword">import</span> { MlclElements } <span class="hljs-keyword">from</span>  <span class="hljs-string">"@molecuel/elements"</span>;

<span class="hljs-keyword">const</span> elements = di.getInstance(<span class="hljs-string">"MlclElements"</span>);
</code></pre>
				<h3 id="configuration">Configuration</h3>
				<p>Configuration settings are imported via separate files and a reference path (e.g.: ./config/production.json)</p>
				<pre><code class="lang-json">{
    <span class="hljs-attr">"databases"</span>: [
        {
            <span class="hljs-attr">"layer"</span>: <span class="hljs-string">"persistence"</span>,
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"mongodb_pers"</span>,
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"MlclMongoDb"</span>,
            <span class="hljs-attr">"uri"</span>: <span class="hljs-string">"mongodb://localhost/mongodb_persistence"</span>
        },
        {
            <span class="hljs-attr">"layer"</span>: <span class="hljs-string">"population"</span>,
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"mongodb_popul"</span>,
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"MlclMongoDb"</span>,
            <span class="hljs-attr">"url"</span>: <span class="hljs-string">"mongodb://localhost/mongodb_population"</span>
        }
    ]
}
</code></pre>
				<pre><code class="lang-typescript">process.env.configpath = <span class="hljs-string">"./config/"</span>;
<span class="hljs-keyword">import</span> { di } <span class="hljs-keyword">from</span> <span class="hljs-string">"@molecuel/di"</span>;
<span class="hljs-keyword">import</span> { MlclElements } <span class="hljs-keyword">from</span>  <span class="hljs-string">"@molecuel/elements"</span>;
<span class="hljs-keyword">import</span> { MlclMongoDb } <span class="hljs-keyword">from</span> <span class="hljs-string">"@molecuel/mongodb"</span>;

di.bootstrap(MlclMongoDb);

<span class="hljs-keyword">const</span> elements = di.getInstance(<span class="hljs-string">"MlclElements"</span>);
</code></pre>
				<p>or via objects and a manual method call</p>
				<pre><code class="lang-typescript"><span class="hljs-keyword">import</span> { di } <span class="hljs-keyword">from</span> <span class="hljs-string">"@molecuel/di"</span>;
<span class="hljs-keyword">import</span> { MlclElements } <span class="hljs-keyword">from</span>  <span class="hljs-string">"@molecuel/elements"</span>;
<span class="hljs-keyword">import</span> { MlclMongoDb } <span class="hljs-keyword">from</span> <span class="hljs-string">"@molecuel/mongodb"</span>;

<span class="hljs-keyword">const</span> config = {
    databases: [
        {
            layer: <span class="hljs-string">"persistence"</span>,
            name: <span class="hljs-string">"mongodb_pers"</span>,
            <span class="hljs-keyword">type</span>: <span class="hljs-string">"MlclMongoDb"</span>,
            uri: <span class="hljs-string">"mongodb://localhost/mongodb_persistence"</span>
        },
        {
            layer: <span class="hljs-string">"population"</span>,
            name: <span class="hljs-string">"mongodb_popul"</span>,
            <span class="hljs-keyword">type</span>: <span class="hljs-string">"MlclMongoDb"</span>,
            url: <span class="hljs-string">"mongodb://localhost/mongodb_population"</span>
        }
    ]
};

di.bootstrap(MlclMongoDb);

<span class="hljs-keyword">const</span> elements = di.getInstance(<span class="hljs-string">"MlclElements"</span>);
elements.dbHandler.addDatabasesFrom(config);
</code></pre>
				<h3 id="initialization">Initialization</h3>
				<pre><code class="lang-typescript"><span class="hljs-keyword">import</span> { di, injectable } <span class="hljs-keyword">from</span> <span class="hljs-string">"@molecuel/di"</span>;
<span class="hljs-keyword">import</span> { MlclElements } <span class="hljs-keyword">from</span>  <span class="hljs-string">"@molecuel/elements"</span>;

<span class="hljs-keyword">const</span> elements = di.getInstance(<span class="hljs-string">"MlclElements"</span>);
<span class="hljs-keyword">const</span> success = <span class="hljs-keyword">await</span> elements.init();
</code></pre>
				<h2 id="usage">Usage</h2>
				<h3 id="example">Example</h3>
				<pre><code class="lang-typescript">process.env.configpath = <span class="hljs-string">"./config/"</span>;
<span class="hljs-keyword">import</span> { di, injectable } <span class="hljs-keyword">from</span> <span class="hljs-string">"@molecuel/di"</span>;
<span class="hljs-keyword">import</span> {
  Collection,
  Element,
  IsDefined,
  MlclElements,
  NotForPopulation } <span class="hljs-keyword">from</span>  <span class="hljs-string">"@molecuel/elements"</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> D <span class="hljs-keyword">from</span> <span class="hljs-string">"@molecuel/elements"</span>;
<span class="hljs-keyword">import</span> { MlclMongoDb } <span class="hljs-keyword">from</span> <span class="hljs-string">"@molecuel/mongodb"</span>;

di.bootstrap(MlclMongoDb);
<span class="hljs-keyword">const</span> elements = di.getInstance(<span class="hljs-string">"MlclElements"</span>);
<span class="hljs-keyword">await</span> elements.init();

<span class="hljs-meta">@injectable</span>
<span class="hljs-meta">@Collection</span>(<span class="hljs-string">"post"</span>)
<span class="hljs-meta">@NotForPopulation</span>()
<span class="hljs-keyword">class</span> Message <span class="hljs-keyword">extends</span> Element {
  <span class="hljs-meta">@IsDefined</span>()
  <span class="hljs-meta">@D</span>.ValidateType([<span class="hljs-built_in">String</span>])
  <span class="hljs-keyword">public</span> recipients: <span class="hljs-built_in">string</span>[];
  <span class="hljs-meta">@D</span>.ValidateType()
  <span class="hljs-keyword">public</span> sender: <span class="hljs-built_in">string</span>;
  <span class="hljs-meta">@D</span>.ValidateType()
  <span class="hljs-keyword">public</span> content: <span class="hljs-built_in">string</span>;
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">recipients: <span class="hljs-built_in">string</span>[], sender: <span class="hljs-built_in">string</span>, content: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">super</span>(elements);
    <span class="hljs-keyword">this</span>.recipients = recipients;
    <span class="hljs-keyword">this</span>.sender = sender;
    <span class="hljs-keyword">this</span>.content = content;
  }
}

<span class="hljs-keyword">let</span> exampleMessage = elements.getInstance(<span class="hljs-string">"Message"</span>, [<span class="hljs-string">"you"</span>], <span class="hljs-string">"me"</span>, <span class="hljs-string">"Text snippet."</span>);
<span class="hljs-keyword">await</span> exampleMessage.save();

<span class="hljs-keyword">await</span> elements.find(exampleMessage._id, Message.collection);
</code></pre>
				<h3 id="export-graphql-schema">Export graphql schema</h3>
				<pre><code class="lang-typescript"><span class="hljs-keyword">const</span> elements = di.getInstance(<span class="hljs-string">"MlclElements"</span>);
<span class="hljs-comment">// returns schema as string</span>
<span class="hljs-keyword">const</span> schema = elements.renderGraphQL();
</code></pre>
				<h2 id="build-system">Build System</h2>
				<p>We are using npm to build the entire module.
					During development we use the tsc compiler defined in the task.json for visual studio code cause the incremental compilation is very fast. To start the build and watch process in Visual Studio Code just press CTRL+SHIFT+B. The build console should come up and show you the results of the build process.
				Any other editor can be used or just use tsc -w -p . on the commandline.</p>
				<p>All available npm options:</p>
				<h3 id="npm-run-tslint">npm run tslint</h3>
				<p>Executes the linter for the typescript files in the src folder</p>
				<h3 id="npm-run-tslint_test">npm run tslint_test</h3>
				<p>Executes the linter for the typescript files in the test folder</p>
				<h3 id="npm-run-ts">npm run ts</h3>
				<p>Runs the Typescript compiler for all files in the src directory</p>
				<h3 id="npm-run-ts_test">npm run ts_test</h3>
				<p>Runs the Typescript compiler for all files in the test directory</p>
				<h3 id="npm-run-build">npm run build</h3>
				<p>Executes thes linter for the files in the src folder and runs the typescript compiler for the files in the src folder.</p>
				<h3 id="npm-run-build_test">npm run build_test</h3>
				<p>Executes thes linter for the files in the test folder and runs the typescript compiler for the files in the test folder.</p>
				<h3 id="npm-run-build_all">npm run build_all</h3>
				<p>Executes thes linter for the files in the src and test folder and runs the typescript compiler for the files in the src and test folder.</p>
				<h3 id="npm-run-mocha">npm run mocha</h3>
				<p>Just executes the local mocha command which relies in the local node_modules directory.</p>
				<h3 id="npm-run-test">npm run test</h3>
				<p>Executes the compilation of the test files and runs the mocha test.</p>
				<h3 id="npm-run-cover">npm run cover</h3>
				<p>Runs the istanbuld code coverage test and remaps the results to the typescript sources</p>
				<h3 id="npm-run-remap">npm run remap</h3>
				<p>Remaps the code coverage report to typescript</p>
				<h3 id="npm-run-remaphtml">npm run remaphtml</h3>
				<p>Remaps the html output of istanbul to the typescript sources</p>
				<h3 id="npm-run-remaplcov">npm run remaplcov</h3>
				<p>Remaps the lcov reports to the typescript sources</p>
				<h3 id="npm-run-coveralls">npm run coveralls</h3>
				<p>Runs the code coverage reports, the remaps and send the results to the coveralls.io service</p>
				<h3 id="npm-run-createdoc">npm run createdoc</h3>
				<p>Creates the HTML for the API documentation in the docs folder. The docs folder is in .gitignore and not part of the master branch. </p>
				<h3 id="npm-run-publishdocs">npm run publishdocs</h3>
				<p>Publishes the API documentation to the gh-pages branch.</p>
				<h3 id="npm-run-docs">npm run docs</h3>
				<p>Shortcut for createdocs and publishdocs</p>
				<h3 id="npm-run-2npm">npm run 2npm</h3>
				<p>Checks it the package version in package.json is higher than the registered one in npm registry and published the package if the version is higher.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-class">
						<a href="classes/decorators.html" class="tsd-kind-icon">Decorators</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/diffobject.html" class="tsd-kind-icon">Diff<wbr>Object</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/element.html" class="tsd-kind-icon">Element</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/mlclelements.html" class="tsd-kind-icon">Mlcl<wbr>Elements</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/idatabaseadapter.html" class="tsd-kind-icon">IDatabase<wbr>Adapter</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/idocuments.html" class="tsd-kind-icon">IDocuments</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/ielement.html" class="tsd-kind-icon">IElement</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/iindexsettings.html" class="tsd-kind-icon">IIndex<wbr>Settings</a>
					</li>
					<li class=" tsd-kind-variable tsd-is-not-exported">
						<a href="globals.html#metadatakey" class="tsd-kind-icon">METADATAKEY</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#persistence_layer" class="tsd-kind-icon">PERSISTENCE_<wbr>LAYER</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#population_layer" class="tsd-kind-icon">POPULATION_<wbr>LAYER</a>
					</li>
					<li class=" tsd-kind-variable tsd-is-not-exported">
						<a href="globals.html#assert" class="tsd-kind-icon">assert</a>
					</li>
					<li class=" tsd-kind-variable tsd-is-not-exported">
						<a href="globals.html#expect" class="tsd-kind-icon">expect</a>
					</li>
					<li class=" tsd-kind-variable tsd-is-not-exported">
						<a href="globals.html#should" class="tsd-kind-icon">should</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#collection" class="tsd-kind-icon">Collection</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#isreferenceto" class="tsd-kind-icon">Is<wbr>Reference<wbr>To</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#notforpopulation" class="tsd-kind-icon">Not<wbr>For<wbr>Population</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#versionable" class="tsd-kind-icon">versionable</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="http://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
<script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-89800241-1', '');
        ga('send', 'pageview');
    </script>
</body>
</html>
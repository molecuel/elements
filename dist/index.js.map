{"version":3,"sources":["index.ts"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;;;;AACb,MAAO,OAAO,WAAW,SAAS,CAAC,CAAC;AACpC,MAAO,aAAa,WAAW,eAAe,CAAC,CAAC;AAEhD;IAQE,YAAY,IAAU,EAAE,MAAY;QAClC,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC;QACvC,IAAI,CAAC,aAAa,GAAG,IAAI,aAAa,CAAC,MAAM,CAAC;YAC5C,IAAI,EAAE,gBAAgB;YACtB,GAAG,EAAE,OAAO;SACb,CAAC,CAAC;IACL,CAAC;IAES,mBAAmB;QAC3B,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,2EAA2E,EAAE,EAAE,cAAc,EAAE,OAAO,EAAE,CAAC,CAAC;IAC5I,CAAC;IAEe,YAAY;;YAC1B,IAAI,CAAC,eAAe,GAAG,MAAM,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAC1D,CAAC;KAAA;IAES,qBAAqB;QAC7B,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC;YAC7B,cAAc,EAAE,KAAK;YACrB,KAAK,EAAE,eAAe;SACvB,CAAC,CAAC;IACL,CAAC;IACe,cAAc;;YAC5B,IAAI,CAAC,iBAAiB,GAAG,MAAM,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC9D,CAAC;KAAA;IAEY,OAAO;;YAClB,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;YAC5B,MAAM,IAAI,CAAC,YAAY,EAAE,CAAC;QAC5B,CAAC;KAAA;AACH,CAAC;AArCe,sBAAa,GAAG,CAAC,CAqChC;AAED,iBAAS,QAAQ,CAAC","file":"index.js","sourcesContent":["'use strict';\r\nimport mongodb = require('mongodb');\r\nimport elasticsearch = require('elasticsearch');\r\n\r\nclass Elements {\r\n  public static loaderversion = 2;\r\n\r\n  private mongoClient: mongodb.MongoClient;\r\n  private mongoConnection: Promise<mongodb.Db>;\r\n  private elasticClient: elasticsearch.Client;\r\n  private elasticConnection: PromiseLike<elasticsearch.Client>;\r\n\r\n  constructor(mlcl?: any, config?: any) {\r\n    this.mongoClient = mongodb.MongoClient;\r\n    this.elasticClient = new elasticsearch.Client({\r\n      host: 'localhost:9200',\r\n      log: 'trace'\r\n    });\r\n  }\r\n\r\n  protected mongoConnectWrapper(): Promise<any> {\r\n    return this.mongoClient.connect('mongodb://localhost/elements?connectTimeoutMS=10000&socketTimeoutMS=10000', { promiseLibrary: Promise });\r\n  }\r\n\r\n  protected async connectMongo() {\r\n    this.mongoConnection = await this.mongoConnectWrapper();\r\n  }\r\n\r\n  protected elasticConnectWrapper(): PromiseLike<any> {\r\n    return this.elasticClient.ping({\r\n      requestTimeout: 30000,\r\n      hello: 'elasticsearch'\r\n    });\r\n  }\r\n  protected async connectElastic() {\r\n    this.elasticConnection = await this.elasticConnectWrapper();\r\n  }\r\n\r\n  public async connect() {\r\n    await this.connectElastic();\r\n    await this.connectMongo();\r\n  }\r\n}\r\n\r\nexport = Elements;\r\n"],"sourceRoot":"/source/"}